(()=>{"use strict";var t={197:t=>{t.exports=require("obsidian")},927:function(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(a,o){function s(t){try{r(i.next(t))}catch(t){o(t)}}function l(t){try{r(i.throw(t))}catch(t){o(t)}}function r(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,l)}r((i=i.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const a=n(197);class o extends a.Plugin{onload(){this.registerMarkdownPostProcessor((t,e)=>{t.querySelectorAll("code").forEach(t=>{var n;const o=null===(n=t.textContent)||void 0===n?void 0:n.trim();if(!o||!o.startsWith("stopwatch"))return;const r=function(t){const e={},n=/(name|passed|limit):\s*([^\s]+)/g;let i;for(;null!==(i=n.exec(t));)e[i[1]]=i[2];const a=void 0!==e.passed;return{spec:{passed:e.passed?s(e.passed):0,limit:e.limit?s(e.limit):void 0,name:e.name},hasPassed:a}}(o),c=function(t,e,n,o,s){const r=document.createElement("span");r.addClass("inline-stopwatch");const c=document.createElement("button");c.addClass("inline-stopwatch-button");const d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttr("viewBox","0 0 16 16");const p=document.createElementNS("http://www.w3.org/2000/svg","path");d.appendChild(p),c.appendChild(d);const u=t=>{p.setAttr("d",t?"M2 2h4v12H2zm8 0h4v12h-4z":"M3 2v12l10-6-10-6z")};u(!1);const m=document.createElement("span");t.name&&(m.addClass("inline-stopwatch-name"),m.textContent=` ${t.name} `);const h=document.createElement("span");h.addClass("inline-stopwatch-time"),h.textContent=l(t.passed);const f=document.createElement("div");let v=null;void 0!==t.limit&&(f.addClass("inline-stopwatch-timeline"),v=document.createElement("div"),v.addClass("inline-stopwatch-fill"),f.appendChild(v)),r.appendChild(c),t.name&&r.appendChild(m),r.appendChild(h),void 0!==t.limit&&r.appendChild(f);let w=!1,x=0,C=null,g=o,y=t.passed;const M=()=>{const e=Date.now(),n=y+Math.floor((e-x)/1e3);if(h.textContent=l(n),v&&t.limit){const e=n%(2*t.limit);let i=0;i=e<t.limit?e/t.limit:1-(e-t.limit)/t.limit,v.style.width=100*Math.max(0,Math.min(1,i))+"%"}},E=t=>i(this,void 0,void 0,function*(){const i=e.app.vault.getAbstractFileByPath(n.sourcePath);if(!(i instanceof a.TFile))return;let o=yield e.app.vault.read(i);const s=function(t,e){const n={},i=/(name|passed|limit):\s*([^\s]+)/g;let a;for(;null!==(a=i.exec(t));)n[a[1]]=a[2];n.passed=l(e);let o="stopwatch";return n.name&&(o+=` name: ${n.name}`),o+=` passed: ${n.passed}`,n.limit&&(o+=` limit: ${n.limit}`),o}(g,t);o=o.replace(`\`${g}\``,`\`${s}\``),yield e.app.vault.modify(i,o),g=s});return c.onclick=()=>i(this,void 0,void 0,function*(){if(w){w=!1,u(!1),C&&window.clearInterval(C);const t=Math.floor((Date.now()-x)/1e3);y+=t,yield E(y)}else w=!0,u(!0),x=Date.now(),C=window.setInterval(M,500),s||(yield E(y),s=!0)}),r}(r.spec,this,e,o,r.hasPassed);t.replaceWith(c)})})}}function s(t){const e=t.split(":").map(t=>parseInt(t,10));for(;e.length<3;)e.unshift(0);const[n,i,a]=e;return 3600*n+60*i+a}function l(t){return`${Math.floor(t/3600).toString().padStart(2,"0")}:${Math.floor(t%3600/60).toString().padStart(2,"0")}:${Math.floor(t%60).toString().padStart(2,"0")}`}e.default=o}},e={},n=function n(i){var a=e[i];if(void 0!==a)return a.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,n),o.exports}(927);module.exports=n})();